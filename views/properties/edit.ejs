<% layout('layouts/boilerplate.ejs') %>
<link rel="stylesheet" href="/stylesheets/edit.css" />

<div class="row">
	<div class="col-md-6 offset-md-3 mb-5">
		<div class="card shadow">
			<div class="card-body">
				<h1 class="text-center">Edit Property</h1>
				<form
					action="/properties/<%= property._id %>?_method=put"
					method="POST"
					novalidate
					class="validated-form"
					enctype="multipart/form-data">
					<div class="mb-3">
						<label class="form-label" for="title">Title</label>
						<input
							class="form-control"
							type="text"
							id="title"
							name="property[title]"
							value="<%= property.title %>"
							required />
						<div class="valid-feedback">Looks Good!</div>
					</div>
					<div class="mb-3">
						<label class="form-label" for="location">Location</label>
						<input
							class="form-control"
							type="text"
							id="location"
							name="property[location]"
							value="<%= property.location %>"
							required />
						<div class="valid-feedback">Looks Good!</div>
					</div>
					<div class="mb-3">
						<label for="image" class="form-label">Upload images</label>
						<input
							class="form-control"
							type="file"
							id="image"
							name="image"
							multiple
							disabled />
					</div>
					<div class="mb-3">
						<% property.images.forEach(function(img, i) { %>
						<img src="<%= img.thumbnail %>" class="img-thumbnail" alt="" />
						<div class="form-check-inline">
							<input
								type="checkbox"
								name="deleteImages[]"
								value="<%=img.filename%>"
								id="image-<%=i%>" />
						</div>
						<label for="image-<%=i%>">Delete?</label>
						<% }) %>
					</div>
					<div class="mb-3">
						<label class="form-label" for="price">Price</label>

						<div class="input-group">
							<span class="input-group-text" id="price-label">$</span>
							<input
								id="price"
								type="text"
								class="form-control"
								placeholder="0.00"
								aria-label="price"
								aria-describedby="price-label"
								name="property[price]"
								value="<%= property.price %>"
								required />
							<div class="valid-feedback">Looks Good!</div>
						</div>
					</div>
					<div class="mb-3">
						<label class="form-label" for="description">Description</label>
						<textarea
							class="form-control"
							type="text"
							id="description"
							name="property[description]"
							required>
<%= property.description %>
				</textarea
						>
						<div class="valid-feedback">Looks Good!</div>
					</div>
					<div class="mb-3">
						<button class="btn btn-info">Update Property</button>
					</div>
				</form>
				<a href="/properties/<%= property._id %>">Back to Property</a>
			</div>
		</div>
	</div>
</div>
